# 連結 LINE Bot 與 Google 帳號

本指南將幫助您將 LINE Bot 的記帳記錄與 Google 帳號連結，這樣您就可以在 Web 界面中查看所有記帳記錄。

## 為什麼需要連結？

- **同步記錄**：將 LINE Bot 中的記帳記錄同步到 Web 界面
- **統一管理**：在同一個地方查看所有記帳記錄
- **跨平台使用**：無論是通過 LINE Bot 還是 Web 界面，所有記錄都會同步

## 連結步驟

### 方法 1：手動連結（推薦）

1. **獲取您的 LINE 用戶 ID**
   - 在 LINE Bot 中輸入指令：`/myid`
   - Bot 會回覆您的 LINE 用戶 ID（例如：`U1234567890abcdef1234567890abcdef`）

2. **登入 Web 界面**
   - 訪問 `https://final-lac-alpha.vercel.app`
   - 使用 Google 帳號登入

3. **連結 LINE 用戶**
   - 在 Dashboard 頁面的右側，找到「連結 LINE Bot」卡片
   - 輸入您在步驟 1 中獲取的 LINE 用戶 ID
   - 點擊「連結 LINE 用戶」按鈕

4. **完成連結**
   - 系統會自動將 LINE Bot 中的所有記帳記錄遷移到您的 Google 帳號
   - 連結成功後，您可以在 Web 界面中看到所有記錄

### 方法 2：自動連結（實驗性）

系統會嘗試自動連結 LINE 用戶，但這可能不夠準確。建議使用手動連結方式以確保正確關聯。

## 使用說明

### 在 LINE Bot 中記帳

1. 打開 LINE Bot
2. 直接輸入記帳訊息，例如：
   - `午餐 150 元`
   - `收入 5000 元薪資`
   - `買書 300 元`

3. Bot 會自動解析並記錄

### 在 Web 界面中查看

1. 登入 Web 界面
2. 在 Dashboard 中查看：
   - **記帳摘要**：總收入、總支出、餘額
   - **記帳列表**：所有記帳記錄
   - **新增記帳**：手動添加記帳記錄

### 同步說明

- ✅ **已連結**：LINE Bot 和 Web 界面的記錄會自動同步
- ❌ **未連結**：LINE Bot 和 Web 界面的記錄是分開的

## 常見問題

### Q: 連結後看不到 LINE Bot 的記錄？

A: 請確認：
1. 您輸入的 LINE 用戶 ID 是否正確
2. 您是否在 LINE Bot 中創建過記帳記錄
3. 嘗試重新整理頁面

### Q: 可以連結多個 LINE 用戶嗎？

A: 不可以。一個 Google 帳號只能連結一個 LINE 用戶。

### Q: 連結後可以取消連結嗎？

A: 目前不支援取消連結。如果需要，請聯繫管理員。

### Q: 連結會影響現有的記帳記錄嗎？

A: 不會。連結只是將 LINE Bot 的記錄遷移到 Google 帳號，不會刪除或修改現有記錄。

## 技術說明

- 連結時，系統會：
  1. 將 LINE 用戶的 `lineUserId` 關聯到 Google 用戶
  2. 將所有交易記錄的 `userId` 更新為 Google 用戶的 ID
  3. 刪除臨時的 LINE 用戶記錄

- 連結後，所有新的記帳記錄（無論是通過 LINE Bot 還是 Web 界面）都會使用同一個用戶 ID，實現完全同步。

